# Integration Tests - Fixtures

## About Fixtures

The `fixtures/` directory contains test files used for integration testing. These files are **generated by the script** and **not committed to git**.

## Setup

To generate the fixtures before running tests:

```bash
cd test/integration
bash setup-fixtures.sh
```

This will create **67 test fixtures** covering various timestamp formats:
- ISO formats (YYYY-MM-DD, compact, etc.)
- Camera/phone prefixes (IMG_, VID_, PXL_, etc.)
- European formats (DD-MM-YYYY)
- French time format (HHhMMmSSs)
- WhatsApp formats
- Instagram montages (double timestamps)
- Export formats with suffixes
- And many more edge cases...

## Running Tests

### Full Test Suite

```bash
# From project root
npm run test:integration

# Or manually
cd test/integration
./run-all.sh
```

### Individual Tests

```bash
cd test/integration
./scenarios/test-basic-rename.sh        # Basic renaming
./scenarios/test-shift-feature.sh       # Time shift feature
./scenarios/test-metadata.sh            # Metadata extraction
./scenarios/test-copy-modes.sh          # Copy modes (structure & flattening)
# ... and more
```

## Test Coverage

The integration test suite includes **11 comprehensive scenarios**:

1. **Basic Rename** - Core timestamp extraction and formatting
2. **Time Shift** - Time adjustment with `--shift` flag
3. **Metadata Extraction (Legacy)** - Extract dates from file metadata
4. **Metadata Modes** - Comprehensive metadata source testing
5. **Interactive Workflow** - Wizard mode with metadata fallback
6. **Execute without Confirmation** - Non-interactive execution
7. **Format Variations** - Different output format templates
8. **Subdirectory Recursion** - Nested directory processing
9. **Revert Script** - Undo functionality testing
10. **Extension Filtering** - Include/exclude extensions
11. **Copy Modes** - Structure preservation and flattening (`--copy` / `--copy-flat`)
